/**************************************************************************************************
  Filename:       hal_uart.h
  Revised:        $Date: 2015-09-21 $
  Revision:       $Revision: V0.1 $

  Description:    


**************************************************************************************************/

#ifndef HAL_UART_H
#define HAL_UART_H

#ifdef __cplusplus
extern "C"
{
#endif

/**************************************************************************************************
 *                                             INCLUDES
 **************************************************************************************************/

#include "hal_board_cfg.h"

/**************************************************************************************************
 * MACROS
 **************************************************************************************************/

    
/**************************************************************************************************
 *                                            CONSTANTS
 **************************************************************************************************/

#define HAL_UART_DMA_RX_MAX        250
#define HAL_UART_DMA_TX_MAX        250

/**************************************************************************************************
 * TYPEDEFS
 **************************************************************************************************/

typedef struct
{
    uint16_t rxBuf[HAL_UART_DMA_RX_MAX];
    uint16_t rxHead;
    uint16_t rxTail;
    
    int8_t txBuf[HAL_UART_DMA_TX_MAX];
    volatile uint16_t txHead;
    uint16_t txTail;
    int8_t txMT;                 // Indication that at least one of two Tx buffers are free.
    
}uartDMACfg_t;
    
/**************************************************************************************************
 *                                             GLOBAL VARIABLES
 **************************************************************************************************/


/**************************************************************************************************
 *                                             FUNCTIONS - API
 **************************************************************************************************/
void HalUartInit( void );
int8_t HalUARTWrite( int8_t *buf, int8_t len );

uint16_t HalUART_RxBufLen( void );
uint16_t HalUARTRead(uint8_t *buf, uint16_t len, uint8_t flag);

/**************************************************************************************************
**************************************************************************************************/

#endif
